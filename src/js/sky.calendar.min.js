angular.module("sky.calendar",["ng"]).directive("skyCalendar",[function(){return{restrict:"AE",scope:{options:"="},replace:true,template:'<div class="sky_calendar_con" ng-class="{\'sky_calendar_con_isShow\':sobj.calendar.showSkyCalendar.canShow}">'+'<input type="text" ng-model="options.calendarValue" ng-blur="sobj.calendar.inputBlur($event)" ng-focus="sobj.calendar.inputFocus()" ng-click="sobj.calendar.inputClick($event)"/>'+'<div class="sky_calendar" ng-show="sobj.calendar.showSkyCalendar.canShow" ng-click="sobj.calendar.hideAllPanel()" ng-mouseup="sobj.calendar.calendarMouseup()" ng-mousedown="sobj.calendar.calendarMousedown()">'+"<table>"+"<thead>"+"<tr>"+'<th class="text-center">'+'<button type="button" class="btn btn-default btn-sm" tabindex="-1" ng-click="sobj.calendar.showDateTbody({year:sobj.calendar.displayDate.year-1,month:sobj.calendar.displayDate.month,date:sobj.calendar.displayDate.date,hour:sobj.calendar.displayDate.hour,minute:sobj.calendar.displayDate.minute})" ng-disabled="sobj.calendar.canDisabledPrevYear">'+'<span class="glyphicon glyphicon-chevron-left"></span>'+"</button>"+"</th>"+'<th colspan="2" class="text-center display-year">'+'<button type="button" class="btn btn-default btn-sm" tabindex="-1" style="width:100%;" ng-click="sobj.calendar.showYearPanel($event,sobj.calendar.displayDate.year)">'+'<strong ng-bind="sobj.calendar.displayDate.year"></strong>'+"<strong>年</strong>"+"</button>"+'<div class="display-year-table" ng-show="sobj.calendar.panel.yearPanel" ng-click="sobj.calendar.stopBubble($event)">'+"<table>"+"<thead>"+"<tr>"+'<th colspan="3" class="text-center">'+'<button ng-disabled="sobj.calendar.canDisabledPrevYearPanel" type="button" class="btn btn-default btn-sm" tabindex="-1" style="width:100%;" ng-click="sobj.calendar.showPrevOrNextYearPanel(-1)">'+'<span class="glyphicon glyphicon-chevron-up"></span>'+"</button>"+"</th>"+"</tr>"+"</thead>"+"<tbody>"+'<tr ng-repeat="yearRows in sobj.calendar.yearTbodyArray">'+'<td class="text-center" ng-repeat="yearCols in yearRows track by $index">'+'<button type="button" style="width:100%;" class="btn btn-sm" ng-class="{\'btn-default\':yearCols!=sobj.calendar.displayDate.year,\'btn-info\':yearCols==sobj.calendar.displayDate.year}" ng-disabled="yearCols>sobj.calendar.options.maxDate.year||yearCols<sobj.calendar.options.minDate.year" ng-click="sobj.calendar.selectYear({year:yearCols,month:sobj.calendar.displayDate.month})">'+'<span ng-bind="yearCols"></span>'+"</button>"+"</td>"+"</tr>"+"</tbody>"+"<tfoot>"+"<tr>"+'<th colspan="3" class="text-center">'+'<button ng-disabled="sobj.calendar.canDisabledNextYearPanel" type="button" class="btn btn-default btn-sm" tabindex="-1" style="width:100%;" ng-click="sobj.calendar.showPrevOrNextYearPanel(1)">'+'<span class="glyphicon glyphicon-chevron-down"></span>'+"</button>"+"</th>"+"</tr>"+"</tfoot>"+"</table>"+"</div>"+"</th>"+'<th class="text-center">'+'<button type="button" class="btn btn-default btn-sm" tabindex="-1" ng-click="sobj.calendar.showDateTbody({year:sobj.calendar.displayDate.year+1,month:sobj.calendar.displayDate.month,date:sobj.calendar.displayDate.date,hour:sobj.calendar.displayDate.hour,minute:sobj.calendar.displayDate.minute})" ng-disabled="sobj.calendar.canDisabledNextYear">'+'<i class="glyphicon glyphicon-chevron-right"></i>'+"</button>"+"</th>"+'<th class="text-center">'+'<button type="button" class="btn btn-default btn-sm" tabindex="-1" ng-click="sobj.calendar.showDateTbody({year:sobj.calendar.displayDate.year,month:sobj.calendar.displayDate.month-1,date:sobj.calendar.displayDate.date,hour:sobj.calendar.displayDate.hour,minute:sobj.calendar.displayDate.minute})" ng-disabled="sobj.calendar.canDisabledPrevMonth">'+'<span class="glyphicon glyphicon-chevron-left"></span>'+"</button>"+"</th>"+'<th class="text-center display-month">'+'<button type="button" class="btn btn-default btn-sm display-month" tabindex="-1" style="width:100%;" ng-click="sobj.calendar.showMonthPanel($event,sobj.calendar.displayDate)">'+'<strong ng-bind="sobj.calendar.displayDate.month"></strong>'+"<strong>月</strong>"+"</button>"+'<div class="display-month-table" ng-click="sobj.calendar.stopBubble($event)" ng-show="sobj.calendar.panel.monthPanel">'+"<table>"+"<tbody>"+'<tr ng-repeat="monthRows in sobj.calendar.monthTbodyArray">'+'<td class="text-center" ng-repeat="monthCols in monthRows track by $index">'+'<button type="button" style="width:100%;" class="btn btn-sm" ng-class="{\'btn-default\':monthCols.month!=sobj.calendar.displayDate.month,\'btn-info\':monthCols.month==sobj.calendar.displayDate.month}" ng-disabled="(monthCols.year==sobj.calendar.options.maxDate.year&&monthCols.month>sobj.calendar.options.maxDate.month)||(monthCols.year==sobj.calendar.options.minDate.year&&monthCols.month<sobj.calendar.options.minDate.month)" ng-click="sobj.calendar.selectMonth({year:monthCols.year,month:monthCols.month})">'+'<span ng-bind="monthCols.month"></span><span>月</span>'+"</button>"+"</td>"+"</tr>"+"</tbody>"+"</table>"+"</div>"+"</th>"+'<th class="text-center">'+'<button type="button" class="btn btn-default btn-sm" tabindex="-1" ng-click="sobj.calendar.showDateTbody({year:sobj.calendar.displayDate.year,month:sobj.calendar.displayDate.month+1,date:sobj.calendar.displayDate.date,hour:sobj.calendar.displayDate.hour,minute:sobj.calendar.displayDate.minute})" ng-disabled="sobj.calendar.canDisabledNextMonth">'+'<i class="glyphicon glyphicon-chevron-right"></i>'+"</button>"+"</th>"+"</tr>"+"<tr>"+'<th class="text-center"><small aria-label="星期六" class="ng-binding">周日</small>'+"</th>"+'<th  class="text-center"><small aria-label="星期六" class="ng-binding">周一</small>'+"</th>"+'<th  class="text-center"><small aria-label="星期六" class="ng-binding">周二</small>'+"</th>"+'<th class="text-center"><small aria-label="星期六" class="ng-binding">周三</small>'+"</th>"+'<th  class="text-center"><small aria-label="星期六" class="ng-binding">周四</small>'+"</th>"+'<th  class="text-center"><small aria-label="星期六" class="ng-binding">周五</small>'+"</th>"+'<th class="text-center"><small aria-label="星期六" class="ng-binding">周六</small>'+"</th>"+"</tr>"+"</thead>"+"<tbody>"+'<tr ng-repeat="dateRows in sobj.calendar.dateTbodyArray">'+'<td class="text-center" ng-repeat="dateCols in dateRows track by $index">'+'<button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-default\':!dateCols.current,\'btn-info\':dateCols.current}" ng-click="sobj.calendar.selectDate(dateCols)" ng-disabled="dateCols.year==sobj.calendar.options.maxDate.year&&dateCols.month==sobj.calendar.options.maxDate.month&&dateCols.date>sobj.calendar.options.maxDate.date||dateCols.year==sobj.calendar.options.minDate.year&&dateCols.month==sobj.calendar.options.minDate.month&&dateCols.date<sobj.calendar.options.minDate.date||dateCols.year==sobj.calendar.options.maxDate.year&&dateCols.month>sobj.calendar.options.maxDate.month||dateCols.year==sobj.calendar.options.minDate.year&&dateCols.month<sobj.calendar.options.minDate.month||dateCols.year<sobj.calendar.options.minDate.year||dateCols.year>sobj.calendar.options.maxDate.year">'+'<span ng-bind="dateCols.date" ng-class="{\'text-muted\':dateCols.month!=sobj.calendar.displayDate.month}"></span>'+"</button>"+"</td>"+"</tr>"+"</tbody>"+"<tfoot>"+"<tr>"+'<td colspan="7">'+'<div class="btn-group sky_calendar_time_btn" role="group" ng-show="sobj.calendar.options.showTime">'+"<span>时间</span>"+"<span>:</span>"+'<button type="button" class="btn btn-default" ng-click="sobj.calendar.showHourPanel($event,sobj.calendar.displayDate)" ng-bind="sobj.calendar.displayDate.hour"></button>'+'<button type="button" class="btn btn-default" ng-bind="sobj.calendar.displayDate.minute" ng-click="sobj.calendar.showMinutePanel($event,sobj.calendar.displayDate)"></button>'+'<div class="display-hour-table" ng-show="sobj.calendar.panel.hourPanel" ng-click="sobj.calendar.stopBubble($event)">'+'<div class="text-center">'+"小时"+'<span class="pull-right" ng-click="sobj.calendar.panel.hourPanel=!sobj.calendar.panel.hourPanel">&times;</span>'+"</div>"+"<div>"+"<table>"+"<tbody>"+'<tr ng-repeat="hourRows in sobj.calendar.hourTbodyArray">'+'<td class="text-center" ng-repeat="hourCols in hourRows">'+'<button type="button" style="width:100%;" class="btn btn-sm" ng-class="{\'btn-default\':!(hourCols.hour==sobj.calendar.displayDate.hour),\'btn-info\':hourCols.hour==sobj.calendar.displayDate.hour}" ng-disabled="sobj.calendar.isHourDisabled(hourCols)" ng-click="sobj.calendar.selectHour(hourCols)">'+'<span ng-bind="hourCols.hour"></span>'+"</button>"+"</td>"+"</tr>"+"</tbody>"+"</table>"+"</div>"+"</div>"+'<div class="display-minute-table" ng-show="sobj.calendar.panel.minutePanel" ng-click="sobj.calendar.stopBubble($event)">'+'<div class="text-center">'+"分钟"+'<span class="pull-right" ng-click="sobj.calendar.panel.minutePanel=!sobj.calendar.panel.minutePanel">&times;</span>'+"</div>"+"<div>"+"<table>"+"<tbody>"+'<tr ng-repeat="minuteRows in sobj.calendar.minuteTbodyArray">'+'<td class="text-center" ng-repeat="minuteCols in minuteRows">'+'<button type="button" style="width:100%;" class="btn btn-sm" ng-class="{\'btn-default\':!(minuteCols.minute==sobj.calendar.displayDate.minute),\'btn-info\':minuteCols.minute==sobj.calendar.displayDate.minute}" ng-disabled="sobj.calendar.isMinuteDisabled(minuteCols)" ng-click="sobj.calendar.selectMinute(minuteCols)">'+'<span ng-bind="minuteCols.minute"></span>'+"</button>"+"</td>"+"</tr>"+"</tbody>"+"</table>"+"</div>"+"</div>"+"</div>"+'<div class="pull-right">'+'<button type="button" class="btn btn-sm btn-success pull-right" ng-click="sobj.calendar.showSkyCalendar.canShow=false">关闭</button>'+'<button type="button" class="btn btn-sm btn-info pull-right" ng-show="sobj.calendar.options.showToday" ng-click="sobj.calendar.showToday()">今天</button>'+'<button type="button" class="btn btn-sm btn-warning pull-right" ng-show="sobj.calendar.options.showClear" ng-click="sobj.calendar.clearInput()">清除</button>'+"</div>"+"</td>"+"</tr>"+"</tfoot>"+"</table>"+"</div>"+"</div>",link:function(c,d,a){var b=c.sobj={};
b.calendar={attributes:{weekValue:[""]},dateTbodyArray:[],monthTbodyArray:[],yearTbodyArray:[],hourTbodyArray:[],minuteTbodyArray:[],displayDate:{year:null,month:null,date:null,hour:null,minute:null},panel:{yearPanel:false,monthPanel:false,hourPanel:false,minutePanel:false},canDisabledPrevYearPanel:false,canDisabledNextYearPanel:false,canDisabledPrevYear:false,canDisabledNextYear:false,canDisabledPrevMonth:false,canDisabledNextMonth:false,options:{maxDate:{year:null,month:null,date:null,hour:null,minute:null},minDate:{year:null,month:null,date:null,hour:null,minute:null},start:{year:null,month:null,date:null,hour:null,minute:null},onChoose:null,showToday:true,showClear:true,showTime:true,isOpen:true},showSkyCalendar:{canShow:false},run:function(e){var f=this;if(e&&e.maxDate!==undefined){f.options.maxDate.year=e.maxDate.getFullYear();f.options.maxDate.month=e.maxDate.getMonth()+1;f.options.maxDate.date=e.maxDate.getDate();f.options.maxDate.hour=e.maxDate.getHours();f.options.maxDate.minute=e.maxDate.getMinutes()}else{f.options.maxDate.year=2099;f.options.maxDate.month=12;f.options.maxDate.date=31;f.options.maxDate.hour=0;f.options.maxDate.minute=0}if(e&&e.minDate!==undefined){f.options.minDate.year=e.minDate.getFullYear();f.options.minDate.month=e.minDate.getMonth()+1;f.options.minDate.date=e.minDate.getDate();f.options.minDate.hour=e.minDate.getHours();f.options.minDate.minute=e.minDate.getMinutes()}else{f.options.minDate.year=1900;f.options.minDate.month=1;f.options.minDate.date=1;f.options.minDate.hour=0;f.options.minDate.minute=0}if(e&&e.showTime!==undefined){f.options.showTime=e.showTime}if(e&&e.showClear!==undefined){f.options.showClear=e.showClear}if(e&&e.onChoose!==undefined){f.options.onChoose=e.onChoose}if(e&&e.isOpen!==undefined){f.options.isOpen=e.isOpen}if(e&&e.start!==undefined){f.options.start.year=e.start.getFullYear();f.options.start.month=e.start.getMonth()+1;f.options.start.date=e.start.getDate();f.options.start.hour=e.start.getHours();f.options.start.minute=e.start.getMinutes()}else{if(e&&e.maxDate&&e.maxDate.getTime()<new Date().getTime()){f.options.start.year=e.maxDate.getFullYear();f.options.start.month=e.maxDate.getMonth()+1;f.options.start.date=e.maxDate.getDate();f.options.start.hour=e.maxDate.getHours();f.options.start.minute=e.maxDate.getMinutes()}else{f.options.start.year=new Date().getFullYear();f.options.start.month=new Date().getMonth()+1;f.options.start.date=new Date().getDate();f.options.start.hour=new Date().getHours();f.options.start.minute=new Date().getMinutes()}}if(e&&e.showToday!==undefined){f.options.showToday=e.showToday}if(new Date().getTime()>new Date(f.options.maxDate.year,f.options.maxDate.month,f.options.maxDate.date,f.options.maxDate.hour,f.options.maxDate.minute).getTime()){f.options.showToday=false}if(new Date().getTime()<new Date(f.options.minDate.year,f.options.minDate.month,f.options.minDate.date,f.options.minDate.hour,f.options.minDate.minute).getTime()){f.options.showToday=false}},initDisplayDate:function(){var e=this;e.displayDate.year=e.options.start.year;e.displayDate.month=e.options.start.month;e.displayDate.date=e.options.start.date;e.displayDate.hour=e.timeFormat(e.options.start.hour);e.displayDate.minute=e.timeFormat(e.options.start.minute)},showDateTbody:function(h){var o=this;if(h.month>12){h.month=1;h.year++}if(h.month<1){h.month=12;h.year--}if(new Date(h.year,h.month,h.date,h.hour,h.minute).getTime()>new Date(o.options.maxDate.year,o.options.maxDate.month,o.options.maxDate.date,o.options.maxDate.hour,o.options.maxDate.minute).getTime()){h.year=o.options.maxDate.year;h.month=o.options.maxDate.month;h.date=o.options.maxDate.date;h.hour=o.options.maxDate.hour;h.minute=o.options.maxDate.minute}if(new Date(h.year,h.month,h.date,h.hour,h.minute).getTime()<new Date(o.options.minDate.year,o.options.minDate.month,o.options.minDate.date,o.options.minDate.hour,o.options.minDate.minute).getTime()){h.year=o.options.minDate.year;h.month=o.options.minDate.month;h.date=o.options.minDate.date;h.hour=o.options.minDate.hour;h.minute=o.options.minDate.minute}o.displayDate.year=h.year;o.displayDate.month=h.month;o.displayDate.date=h.date;o.displayDate.hour=o.timeFormat(h.hour);o.displayDate.minute=o.timeFormat(h.minute);var f=[];var j={year:0,month:0,data:[]};if(h.month==1){j.month=12;j.year=h.year-1}else{j.month=h.month-1;j.year=h.year}var l=o.getDaysByMonth(j.year,j.month);var e=new Date(h.year,h.month-1,1).getDay();for(var k=e-1;k>=0;k--){f.push({year:j.year,month:j.month,date:l-k})}var g=o.getDaysByMonth(h.year,h.month);for(var k=1;k<=g;k++){if(h.date==k){f.push({year:h.year,month:h.month,date:k,current:true})}else{f.push({year:h.year,month:h.month,date:k})}}var n={year:0,month:0,data:[]};if(h.month==12){n.month=1;n.year=h.year+1}else{n.month=h.month+1;n.year=h.year}var m=f.length;for(var k=1;k<=42-m;k++){f.push({year:n.year,month:n.month,date:k})}o.dateTbodyArray=[];for(var k=0;k<6;k++){o.dateTbodyArray.push(f.slice(k*7,k*7+7))}o.canDisabledPrevYear=false;o.canDisabledNextYear=false;
if(o.displayDate.year==o.options.maxDate.year){o.canDisabledNextYear=true}if(o.displayDate.year==o.options.minDate.year){o.canDisabledPrevYear=true}o.canDisabledPrevMonth=false;o.canDisabledNextMonth=false;if(o.displayDate.year==o.options.maxDate.year&&o.displayDate.month==o.options.maxDate.month){o.canDisabledNextMonth=true}if(o.displayDate.year==o.options.minDate.year&&o.displayDate.month==o.options.minDate.month){o.canDisabledPrevMonth=true}},getDaysByMonth:function(e,f){if(f==1||f==3||f==5||f==7||f==8||f==10||f==12){return 31}else{if(f==2){if((e%4==0)&&(e%100!=0||e%400==0)){return 29}else{return 28}}else{return 30}}},selectYear:function(f){var e=this;e.hideAllPanel();e.displayDate.year=f.year;e.showDateTbody(e.displayDate)},selectMonth:function(f){var e=this;e.hideAllPanel();e.displayDate.month=f.month;e.showDateTbody(e.displayDate)},selectDate:function(f){var e=this;f.hour=e.displayDate.hour;f.minute=e.displayDate.minute;e.showDateTbody(f);e.showTimeFormat(f);if(e.options.onChoose){e.options.onChoose(c.options.calendarValue)}},selectHour:function(f){var e=this;f.hour=e.timeFormat(f.hour);e.panel.hourPanel=false;e.displayDate.hour=f.hour;if(new Date(e.displayDate.year,e.displayDate.month,e.displayDate.date,e.displayDate.hour,e.displayDate.minute).getTime()>new Date(e.options.maxDate.year,e.options.maxDate.month,e.options.maxDate.date,e.options.maxDate.hour,e.options.maxDate.minute).getTime()){e.displayDate.year=e.options.maxDate.year;e.displayDate.month=e.options.maxDate.month;e.displayDate.date=e.options.maxDate.date;e.displayDate.hour=e.timeFormat(e.options.maxDate.hour);e.displayDate.minute=e.timeFormat(e.options.maxDate.minute)}if(new Date(e.displayDate.year,e.displayDate.month,e.displayDate.date,e.displayDate.hour,e.displayDate.minute).getTime()<new Date(e.options.minDate.year,e.options.minDate.month,e.options.minDate.date,e.options.minDate.hour,e.options.minDate.minute).getTime()){e.displayDate.year=e.options.minDate.year;e.displayDate.month=e.options.minDate.month;e.displayDate.date=e.options.minDate.date;e.displayDate.hour=e.timeFormat(e.options.minDate.hour);e.displayDate.minute=e.timeFormat(e.options.minDate.minute)}e.showTimeFormat(e.displayDate);if(e.options.onChoose){e.options.onChoose(c.options.calendarValue)}},selectMinute:function(f){var e=this;f.minute=e.timeFormat(f.minute);e.panel.minutePanel=false;e.displayDate.minute=f.minute;e.showTimeFormat(e.displayDate);if(e.options.onChoose){e.options.onChoose(c.options.calendarValue)}},showYearPanel:function(f,h){var j=this;f.stopPropagation();j.hideAllPanel();j.panel.yearPanel=true;j.yearTbodyArray=[];j.canDisabledPrevYearPanel=false;j.canDisabledNextYearPanel=false;var e=[];for(var g=-4;g<5;g++){e.push(h+g)}for(var g=0;g<3;g++){j.yearTbodyArray.push(e.slice(g*3,g*3+3))}j.canDisabledPrevYearPanel=false;j.canDisabledNextYearPanel=false;if(j.yearTbodyArray[0][0]<j.options.minDate.year){j.canDisabledPrevYearPanel=true}if(j.yearTbodyArray[2][2]>j.options.maxDate.year){j.canDisabledNextYearPanel=true}},showPrevOrNextYearPanel:function(h){var g=this;for(var f=0;f<3;f++){for(var e=0;e<3;e++){if(h==1){g.yearTbodyArray[f][e]+=9}else{g.yearTbodyArray[f][e]-=9}}}g.canDisabledPrevYearPanel=false;g.canDisabledNextYearPanel=false;if(g.yearTbodyArray[0][0]<g.options.minDate.year){g.canDisabledPrevYearPanel=true}if(g.yearTbodyArray[2][2]>g.options.maxDate.year){g.canDisabledNextYearPanel=true}},showMonthPanel:function(g,m){var k=this;g.stopPropagation();k.hideAllPanel();k.panel.monthPanel=true;k.monthTbodyArray=[];var e=1;var l=[];for(var h=0;h<6;h++){for(var f=0;f<2;f++){l.push({year:m.year,month:e++})}}for(var h=0;h<6;h++){k.monthTbodyArray.push(l.slice(h*2,h*2+2))}},showHourPanel:function(g,m){var k=this;g.stopPropagation();k.hideAllPanel();k.panel.hourPanel=true;k.hourTbodyArray=[];var e=0;var l=[];for(var h=0;h<6;h++){for(var f=0;f<4;f++){l.push({year:m.year,month:m.month,date:m.date,hour:e++})}}for(var h=0;h<6;h++){k.hourTbodyArray.push(l.slice(h*4,h*4+4))}},showMinutePanel:function(g,m){var k=this;g.stopPropagation();k.hideAllPanel();k.panel.minutePanel=true;k.minuteTbodyArray=[];var e=0;var l=[];for(var h=0;h<6;h++){for(var f=0;f<10;f++){l.push({year:m.year,month:m.month,date:m.date,hour:m.hour,minute:e++})}}for(var h=0;h<6;h++){k.minuteTbodyArray.push(l.slice(h*10,h*10+10))}},hideAllPanel:function(){var f=this;for(var e in f.panel){f.panel[e]=false}},stopBubble:function(e){e.stopPropagation()},timeFormat:function(e){if(String(e).length<2){return String("0"+e)}else{return String(e)}},showTimeFormat:function(f){var e=this;if(e.options.showTime){c.options.calendarValue=f.year+"-"+e.timeFormat(f.month)+"-"+e.timeFormat(f.date)+" "+e.timeFormat(f.hour)+":"+e.timeFormat(f.minute)}else{c.options.calendarValue=f.year+"-"+e.timeFormat(f.month)+"-"+e.timeFormat(f.date)}},isHourDisabled:function(f){var e=this;if(new Date(f.year,f.month,f.date,f.hour).getTime()>new Date(e.options.maxDate.year,e.options.maxDate.month,e.options.maxDate.date,e.options.maxDate.hour).getTime()||new Date(f.year,f.month,f.date,f.hour).getTime()<new Date(e.options.minDate.year,e.options.minDate.month,e.options.minDate.date,e.options.minDate.hour).getTime()){return true
}else{return false}},isMinuteDisabled:function(f){var e=this;if(new Date(f.year,f.month,f.date,f.hour,f.minute).getTime()>new Date(e.options.maxDate.year,e.options.maxDate.month,e.options.maxDate.date,e.options.maxDate.hour,e.options.maxDate.minute).getTime()||new Date(f.year,f.month,f.date,f.hour,f.minute).getTime()<new Date(e.options.minDate.year,e.options.minDate.month,e.options.minDate.date,e.options.minDate.hour,e.options.minDate.minute).getTime()){return true}else{return false}},showToday:function(){var e=this;e.showDateTbody({year:new Date().getFullYear(),month:new Date().getMonth()+1,date:new Date().getDate(),hour:new Date().getHours(),minute:new Date().getMinutes()});e.showTimeFormat(e.displayDate);if(e.options.onChoose){e.options.onChoose(c.options.calendarValue)}},clearInput:function(){var e=this;c.options.calendarValue="";e.showSkyCalendar.canShow=false},inputBlur:function(e){var f=this;if(!f.showSkyCalendar.mousedown){if(f.options.isOpen){f.showSkyCalendar.canShow=false}}else{e.currentTarget.focus()}},calendarMouseup:function(){var e=this;e.showSkyCalendar.mousedown=false},calendarMousedown:function(){var e=this;e.showSkyCalendar.mousedown=true},calendarClick:function(){var e=this;e.showSkyCalendar.mousedown=true},inputFocus:function(){var e=this;e.run(c.options);e.showSkyCalendar.canShow=true},inputClick:function(){var e=this;e.run(c.options);e.showSkyCalendar.canShow=true}};b.calendar.run(c.options);b.calendar.initDisplayDate();b.calendar.showDateTbody(b.calendar.displayDate);c.options.calendarObject=b.calendar}}}]);